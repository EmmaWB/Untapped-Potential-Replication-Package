------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
      name:  <unnamed>
       log:  H:\.shortcut-targets-by-id\1-HUB-LpZUD5DBPfVEOldrYqSrJfPCYXg\triplethreat\study3c - hybrid\SMR Study 1 Replication Package/do/log/01_clean_resume_data.log
  log type:  text
 opened on:  22 Jun 2024, 15:43:55

. 
. * Clearing environment
. clear all

. 
. 
. 
. ********************************************************************************
. * Load data                                                                    *
. ********************************************************************************
. 
. * Import CSV storing resume data
. import delimited code temp_gender_string temp_parent_string candidate ///
>         using "$data/rawdata/resume_data.csv", clear
(4 vars, 3,225 obs)

.         
. * Removing any odd characters from code (code is equivalent to unique user ID)
. ssc install charlist
checking charlist consistency and verifying not already installed...
all files already exist and are up to date.

. charlist code
0123456789abcdefghijklmnoprstuvwyz¯»¿ÂÃ

. return list

macros:
              r(chars) : "0123456789abcdefghijklmnoprstuvwyz¯»¿ÂÃ"
           r(sepchars) : "0 1 2 3 4 5 6 7 8 9 a b c d e f g h i j k l m n o p r s t u v w y z ¯ » ¿ Â Ã "
              r(ascii) : "48 49 50 51 52 53 54 55 56 57 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 114 115 116 117 118 119 121 122 175 187 191 194 195 "

. display r(ascii)
48 49 50 51 52 53 54 55 56 57 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 114 115 116 117 118 119 121 122 175 187 191 194 195 

. foreach i of numlist 123/195 {
  2.         replace code = subinstr(code, "`=char(`i')'", "", .)
  3. }
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(1 real change made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(1 real change made)
(0 real changes made)
(0 real changes made)
(0 real changes made)
(1 real change made)
(0 real changes made)
(0 real changes made)
(1 real change made)
(1 real change made)

. replace code = subinstr(code, char(34), "", .) // removes quotation marks
(0 real changes made)

. 
.                 
.         
. ********************************************************************************
. * Labeling variables & values                                                  *
. ********************************************************************************
. 
. * Encode the string variables so we can use them as numbers in analyses
. foreach field in gender parent {
  2.         encode temp_`field'_string, gen(temp_`field')
  3.         drop temp_`field'_string
  4. }

. 
. * Code the values to 0/1 rather than 1/2 and set the value labels
. recode temp_gender      (1 = 0 "Man") /// 
>                                         (2 = 1 "Woman"), gen(gender)
(3225 differences between temp_gender and gender)

. recode temp_parent      (1 = 0 "Non-parent") ///
>                                         (2 = 1 "Parent"), gen(parent)
(3225 differences between temp_parent and parent)

. 
. * Drop the old versions of the variables now that we don't need them
. drop temp*

. 
. * Replacing resume candidate number to match Qualtrics data. Candidate A = 2, Candidate B = 3. 
. replace candidate = candidate + 1
(3,225 real changes made)

. 
. * Label the variables
. label var gender "Resume Gender"

. label var parent "Resume Parental Status"

. label var candidate "Candidate Number"

. 
. ********************************************************************************
. * Reshaping to wide and saving dataset                                         *
. ********************************************************************************
. 
. /* 
> Here we reshape the dataset so that each observation is a survey participant, 
> uniquely identified by "code," with variables corresponding to the two 
> candidates they viewed.
> */
. reshape wide gender parent, i(code) j(candidate)
(note: j = 2 3)

Data                               long   ->   wide
-----------------------------------------------------------------------------
Number of obs.                     3225   ->    1645
Number of variables                   4   ->       5
j variable (2 values)         candidate   ->   (dropped)
xij variables:
                                 gender   ->   gender2 gender3
                                 parent   ->   parent2 parent3
-----------------------------------------------------------------------------

.         
. * Save dataset for merging with other datasets in later do-files
. save "$data/resume_data_wide.dta", replace
file H:\.shortcut-targets-by-id\1-HUB-LpZUD5DBPfVEOldrYqSrJfPCYXg\triplethreat\study3c - hybrid\SMR Study 1 Replication Package/data/resume_data_wide.dta saved

. 
. log close
      name:  <unnamed>
       log:  H:\.shortcut-targets-by-id\1-HUB-LpZUD5DBPfVEOldrYqSrJfPCYXg\triplethreat\study3c - hybrid\SMR Study 1 Replication Package/do/log/01_clean_resume_data.log
  log type:  text
 closed on:  22 Jun 2024, 15:43:57
------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
